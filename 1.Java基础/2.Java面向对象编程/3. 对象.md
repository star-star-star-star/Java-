# 构造方法的概念

构造方法的工作方式是这样的：new运算符表明我们想创建类的一个新实例。首先，分配内存存储新建的对象实例；然后，调用构造方法的主体，并传入指定的参数；最后，构造方法使用这些参数执行初始化新对象所需的一切操作。

Java中的每个类都至少有一个构造方法，其作用是执行初始化新对象所需的操作。javac编译器也自动为我们提供了一个构造方法，叫做默认构造方法，这个构造方法没有参数，而且不执行任何特殊的初始化操作。

# 定义构造方法

下面是一些关于命名、声明和编写构造方法的基本注意事项：
+ 构造方法的名称始终和类名一样。
+ 声明构造方法时不指定返回值类型，连void都不用。
+ 构造方法的主体初始化对象。可以把主体的作用想象为设定this引用的内容。
+ 构造方法不能返回this或任何其他值。

# 定义多个构造方法

在复杂的类中，经常会定义不同的构造方法。只要构造方法的参数列表不同，为一个类定义多个构造方法完全是合法的。编译器会根据提供的参数数量和类型判断你想使用的是哪个构造方法。定义多个构造方法和方法重载的原理类似。

# 在一个构造方法中调用另一个构造方法

如果类有多个构造方法，会用到this关键字的一种特殊用法。在一个构造方法中可以使用this关键字调用同一个类中的另一个构造方法。

如果一些构造方法共用大量的初始化代码，这种技术是有用的，因为能避免代码重复。如果构造方法执行很多初始化操作，在这种复杂的情况下，这种技术十分有用。

但是，使用 this() 时有个重大的限制：只能出现在构造方法的第一个语句中。但是，调用这个方法后，可以执行构造方法所需的任何其他初始化操作。

# 字段的默认值以及初始化程序

类中的字段不一定要初始化。如果没有指定初始值，字段自动使用默认值初始化，具体使用哪个值，根据字段的类型而定。这些默认值由Java语言规范而定，实例字段和类字段都适用。

如果字段的默认值不适合字段，可以显式提供其他的初始值。

需要注意的是，字段声明不是任何方法的一部分。Java编译器会自动为字段生成初始化代码，然后把这些代码放在类的所有构造方法中。这些初始化代码按照字段在源码中出现的顺序插入构造方法，因此，字段的初始化程序可以使用在其之前声明的任何字段的初始值。

如果某个构造方法的开头使用 this() 调用其他构造方法，那么字段的初始化代码不会出现在这个构造方法中。此时，初始化由 this() 调用的构造方法处理。

对于类字段而言，就算不创建类的实例，类字段也关联在类身上。这意味着，类字段要在调用构造方法之前初始化。为此，javac会为每个类自动生成一个类初始化方法。类字段在这个方法的主体中初始化。这个方法只有在首次使用类之前调用一次（经常是Java虚拟机首次加载类时）。

和实例字段的初始化一样，类字段的初始化表达式按照类字段在源码中的顺序插入类初始化方法。因此，类字段的初始化表达式可以使用在其之前声明的类字段。类初始化方法是内部方法，对Java程序员不可见。在类文件中，它的名称是 `<clinit>` 。

至此，我们知道对象可以通过字段的初始化表达式和构造方法中的任何代码初始化。类有一个类初始化方法，这个方法和构造方法不一样，不能像构造方法那样显式定义主体。不过，Java允许编写用于初始化类字段的方法，所用的结构叫“静态初始化程序”。静态初始化程序由 static 关键字及随后的花括号中的代码块组成。在类定义中，静态初始化程序可以放在字段和方法定义能出现的任何位置。一个类可以有任意多个静态初始化程序。各初始化程序块的主体会和所有静态字段的初始化表达式一起合并到类初始化方法中。静态初始化程序和类方法的相同点是，不能使用 this 关键字，也不能使用类中的任何实例字段或实例方法。

类还可以有实例初始化程序。实例初始化程序和静态初始化程序类似，不过初始化的是对象而不是类。一个类可以有任意多个实例初始化程序，而且实例初始化程序可以放在字段和方法定义能出现的任何位置。各实例初始化程序的主体和所有实例字段初始化表达式一起，放在类中每个构造方法的开头。实例初始化程序的外观和静态初始化程序类似，不过不使用 static 关键字。也就是说，实例初始化程序只是放在花括号里的任意Java代码。

实例初始化程序可以初始化数组或其他需要复杂初始化操作的字段。实例初始化程序有时很有用，因为它们把初始化代码放在字段后面，而不是单独放在构造方法中。不过，现实中很少使用实例初始化程序。
