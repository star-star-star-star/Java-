# 接口的概念

和类一样，接口定义一种新的引用类型，接口的作用只是描绘API，因此，接口提供类型的描述信息，以及实现这个API的类应该提供的方法（和签名）。

一般来说，Java的接口不为它描述的方法提供实现代码。这些方法是强制要实现的——想实现接口的类必须实现这些方法。

不过，接口可能想把API中的某些方法标记为可选，如果实现接口的类不想实现就不用实现。这种机制通过 default 关键字实现，接口必须为可选的方法提供默认实现，未实现这些方法的类会使用默认实现。

需要注意的是，接口中的可选方法是Java 8 的新功能，之前的版本中没有。

接口不能直接实例化，也不能创建这种接口类型的成员。接口必须通过类实现，而且类要提供所需的方法主体。这个类的实例既属于这个类定义的类型，也属于这个接口定义的类型。不属于同一个类或超类的对象，通过实现同一个接口，也能属于同一种类型。

# 定义一个接口

定义接口的方式和定义类差不多，不过所有（非默认的）方法都是抽象方法，而且关键字class要换成interface。

接口的成员有些限制：
+ 接口中所有强制方法都隐式使用abstract声明，不能有方法主体，要使用分号。可以使用abstract修饰符，但一般习惯省略。
+ 接口定义公开的API。接口中的所有成员都隐式使用public声明，而且习惯省略不必要的public修饰符。如果在接口中使用protected或private定义方法，会导致编译时错误。
+ 接口不能定义任何实例字段。字段是实现细节，而接口是规格不是实现。在接口中只能定义同时使用static和final声明的常量。
+ 接口不能实例化，因此不定义构造方法。
+ 接口中可以包含嵌套类型。嵌套类型隐式使用public和static声明。
+ 从Java 8 开始，接口中可以包含静态方法。Java之前的版本不允许这么做，这被广泛认为是Java语言的一个设计缺陷。

# 扩展接口

接口可以扩展其他接口，而且和类的定义一样，接口的定义可以包含一个extends子句。接口扩展另一个接口时，会继承父接口中的所有方法和常量，而且可以定义新方法和常量。不过，和类不同的是，接口的extends子句可以包含多个父接口。

扩展多个接口的接口，会继承每个父接口中的所有方法和常量，而且可以定义属于自己的方法和常量。实现这个接口的类必须实现这个接口直接定义的抽象方法，以及从所有父接口中继承的全部抽象方法。

# 实现接口

类使用extends指定超类，类似地，类使用implements列出它支持的一个或多个接口。implements是一个Java关键字，可以出现在类声明中，但要放在extends子句后面。implements关键字后面是这个类要实现的一组接口，接口之间使用逗号分隔。

类在implements子句中声明接口时，表明这个类要为接口中的每个强制方法提供实现（即主体）。如果实现接口的类没有为接口中的每个方法提供实现，那么这个类从接口中继承未实现的抽象方法，而且这个类本身必须使用 abstract 声明。如果类实现多个接口，必须实现每个接口中的所有强制方法（否则这个类要使用abstract声明）。

在Java中，接口和类一样，也是数据类型。如果一个类实现了一个接口，那么这个类的实例可以赋值给这个接口类型的变量。

# 实现多个接口

虽然一个类只能扩展一个超类，但可以实现任意多个接口。

一个类实现多个接口只是表明这个类要实现所有接口中的全部抽象方法（即强制方法）。

# 默认方法

Java 8 出现后，接口中的方法可以包含实现了。在接口描述的API中通过可选的方法表示，一般叫做默认方法。

首先说明为什么需要这种默认机制。
+ 向后兼容性。Java平台始终关注向后兼容性。这意味着，为前一版平台编写（或者已经编译）的代码在最新版平台中必须能继续使用。这个原则让开发团队坚信，升级JDK或JRE后不会破坏之前能正常运行的应用。向后兼容性是Java平台的一大优势，但是为此，Java平台有诸多约束。其中一个约束是，新发布的接口不能添加新的强制方法。重新定义接口后，如果尝试在为旧接口编写的代码中使用这个新接口，不会成功。需要注意的是，在你的代码中可以轻易地看到效果。编译一个依赖接口的类文件，在接口中添加一个新的强制方法，然后使用新版接口和旧的类文件尝试运行程序。你会看到程序崩溃，抛出NoClassDefError异常。Java 8 的设计者注意到了这个缺陷，因为设计者的目标之一是升级Java核心中的集合库，引入使用lambda表达式的方法。若想解决这个问题，需要一种新机制。这种机制必须要允许向接口中添加可选的新方法，而不破坏向后兼容性。
+ 实现默认方法。在接口中添加的新方法而不破坏向后兼容性，这需要为接口的旧实现提供一些新实现，以便接口能继续使用。这个机制是默认方法，在JDK 8 中首次添加到Java平台。默认方法（有时也叫可选方法）可以添加到任何接口中。默认方法必须包含实现，即默认实现，写在接口定义中。

默认方法的基本行为如下：
+ 实现接口的类可以（但不是必须）实现默认方法。
+ 如果实现接口的类实现了默认方法，那么使用这个类中的实现。
+ 如果找不到其他实现，就使用默认实现。

# 标记接口

有时，定义全空的接口很有用。类实现这种接口时只需在implements子句中列出这个接口，而不用实现任何方法。此时，这个类的任何实例都是这个接口的有效实例。Java代码可以使用instanceof运算符检查实例是否属于这个接口，因此这种技术是为对象提供额外信息的有力方式。

java.io.Serializable接口就是一种标记接口。实现Serializable接口的类告诉ObjectOutputStream类，这个类的实例可以安全地序列化。

java.util.RandomAccess也是标记接口：java.util.List接口实现了这个接口，表明这个接口能快速随机访问列表中的元素。

后面会看到，Java的类型系统和类型的名称联系紧密，这种方式叫做“名义类型”（nominal typing）。标记接口是个很好的例子，因为它除了名称什么都没有。
